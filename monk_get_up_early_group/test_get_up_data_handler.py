from get_up_data_handler import Message
from get_up_data_handler import ChainMessageReminderService
from get_up_data_handler import pretty_json_print_dict


"""
Unit Tests
"""


if __name__ == '__main__':
    test_msg_content = "wxid_6rfqzef7hjir22:\n#æ¥é¾™\næ—©ä¸Šå¥½å‘€ï¼Œæ—©èµ·æœ‰å“ªäº›æ¸…é†’æ­¥éª¤\n\n1. å¤§*-** 4:30\n-5:30é˜…è¯»&ç­‹**æ¾\n-7:00è·‘***\n-8:00æ´—æ¼±***è·¯\n-9:00é˜…è¯»\n2. M*** 4:52\n-5:10 å°**\n-5:30 å†¥æƒ³ğŸ§˜\u200dâ™€ï¸\n-6:00-ã€Šä¹Ÿè®¸ä½ è¯¥æ‰¾ä¸ªäººèŠèŠã€‹\n-6:45æœ‰æ°§\n-7:20æ”¶æ‹¾æ´—æ¼±å‡ºé—¨\n3. æ*** 5:33\n6:10 æŠ¤è‚¤ï¼Œå¬è¯¾\n6:30 å†¥æƒ³ğŸ§˜\u200dâ™€ï¸ï¼Œã€Šå¿ƒç»ã€‹ï¼Œè‡ªæˆ‘è‚¯å®š\n6:58 èƒŒä¹¦ï¼Œè’™ç”°çš„æ•™è‚²æ€æƒ³\n7:20 å‡ºé—¨\n4. å’Œ**** 6-9.24\n-7.51 æ¸…ç† 13 ä¸ªéšæ‰‹è®°æ­£å¿µ\n-9.24 ä»Šå¤©çš„ä¾èµ–å€’ç½®åŸåˆ™ç»ˆäºéå¸¸å¿«é€Ÿæ‡‚äº†ï¼Œè®¾è®¡åŸåˆ™å’Œæ¨¡å¼å°±åƒæ‘„å½±çš„æ„å›¾å’Œæ‹äººè„šæ”¾åœ¨ä¸‹é¢ä¸€æ ·\nå¿ƒæ™ºè§‰å¯Ÿè§£æ‚Ÿï¼ŒåŸæ¥è¯„åˆ¤ä¹Ÿæ˜¯ä¸€ç§æƒ…ç»ªï¼Œè¯„åˆ¤ç”±äºæœ‰äº†å¯¹ä¸é”™ï¼Œä½†æ˜¯å®é™…ä¸Šæ²¡æœ‰å¯¹é”™å¥½åï¼Œæ”¾ä¸‹å¯¹é”™ï¼Œå¯¹é”™æ˜¯ä½ äº”å®˜æ”¶é›†èµ·æ¥çš„\n5. åˆ©**** 6:10\n6. äºº***** 6:18\n-6:40ååœ¨åºŠä¸Šæ¸…é†’ï¼Œæœ€è¿‘æ€»æ˜¯ç¡å¾—æ™šï¼Œèµ·ä¸æ¥äº†\n-7:20å¬ä¹¦ï¼Œé˜…è¯»\n-7:50æ—©é¥­ æ´—æ¼±å‡ºé—¨\n7. æ›¾** 6:25\n-7:05 æ—©é¤å‡ºé—¨\n-7:25 é‡åˆ°è€åŒäº‹èŠå¤©\n-7:50 å›½åº†å¤‡è€ƒå¤ä¹ è®¡åˆ’\n-8:20 å­¦ä¹ å¾—åˆ°è¯¾ç¨‹\n8. ğŸ‘***** 6:28\n-7:10è¿åŠ¨\n-7:30æ´—å¤´æ´—æ¾¡\n-7:50åƒæ—©é¥­\n-8:20æ”¶æ‹¾ï¼Œæ´—æ¼±å‡ºé—¨\n9. ç´****** 6.30\n10. å°******* 6:36\n11. å¤§****** 7:00\n12. FOUND40***** 7:04\n13. e**** 7;04\n14. çŒ«** 7.20\n7.30 æ´—æ¼±\n8.00 æ‰“çƒ\n9.00 ç®—æ³•è®­ç»ƒ\n9.30 å­¦ä¹ æ˜é‡‘å°å†Œ\n15. æ±¤*** 7:26\n16. ä¸**** 7.30\n-8.00 å†¥æƒ³\n-8.20æ´—æ¼±\n-9.00 ã€Šå†…è¯****ã€‹\n17. é’±****** 7:30\n18. åº·***7:40\n19. å½±** 7:50\n20. å°** 7.50"
    test_msg = Message(test_msg_content)

    service = ChainMessageReminderService(test_msg)

    reminded_msg = service.get_reminded_msg()
    print(reminded_msg)
    '''
    Output:
    Hiï¼Œ@ç´****** @å¤§****** @å½±** @å°******* @æ±¤*** @å°** @é’±****** @e**** @åˆ©**** @FOUND40*****ï¼Œè®°å¾—æ›´æ–°ä»Šå¤©çš„æ—©èµ·æ—¥å¿—å“¦ (*^â–½^*)
    '''

    parsed_content_dict = service.get_parsed_content_dict()
    pretty_json_print_dict(parsed_content_dict)
    '''
    Output:
    {
        "å¤§*-**": {
            "nick": "å¤§*-**",
            "get_up_time": "04:30:00",
            "get_up_log": "-5:30é˜…è¯»&ç­‹**æ¾\n-7:00è·‘***\n-8:00æ´—æ¼±***è·¯\n-9:00é˜…è¯»"
        },
        "M***": {
            "nick": "M***",
            "get_up_time": "04:52:00",
            "get_up_log": "-5:10 å°**\n-5:30 å†¥æƒ³ğŸ§˜\u200dâ™€ï¸\n-6:00-ã€Šä¹Ÿè®¸ä½ è¯¥æ‰¾ä¸ªäººèŠèŠã€‹\n-6:45æœ‰æ°§\n-7:20æ”¶æ‹¾æ´—æ¼±å‡ºé—¨"
        },
        "æ***": {
            "nick": "æ***",
            "get_up_time": "05:33:00",
            "get_up_log": "6:10 æŠ¤è‚¤ï¼Œå¬è¯¾\n6:30 å†¥æƒ³ğŸ§˜\u200dâ™€ï¸ï¼Œã€Šå¿ƒç»ã€‹ï¼Œè‡ªæˆ‘è‚¯å®š\n6:58 èƒŒä¹¦ï¼Œè’™ç”°çš„æ•™è‚²æ€æƒ³\n7:20 å‡ºé—¨"
        },
        "å’Œ****": {
            "nick": "å’Œ****",
            "get_up_time": "06:00:00",
            "get_up_log": "-9.24\n-7.51 æ¸…ç† 13 ä¸ªéšæ‰‹è®°æ­£å¿µ\n-9.24 ä»Šå¤©çš„ä¾èµ–å€’ç½®åŸåˆ™ç»ˆäºéå¸¸å¿«é€Ÿæ‡‚äº†ï¼Œè®¾è®¡åŸåˆ™å’Œæ¨¡å¼å°±åƒæ‘„å½±çš„æ„å›¾å’Œæ‹äººè„šæ”¾åœ¨ä¸‹é¢ä¸€æ ·\nå¿ƒæ™ºè§‰å¯Ÿè§£æ‚Ÿï¼ŒåŸæ¥è¯„åˆ¤ä¹Ÿæ˜¯ä¸€ç§æƒ…ç»ªï¼Œè¯„åˆ¤ç”±äºæœ‰äº†å¯¹ä¸é”™ï¼Œä½†æ˜¯å®é™…ä¸Šæ²¡æœ‰å¯¹é”™å¥½åï¼Œæ”¾ä¸‹å¯¹é”™ï¼Œå¯¹é”™æ˜¯ä½ äº”å®˜æ”¶é›†èµ·æ¥çš„"
        },
        "åˆ©****": {
            "nick": "åˆ©****",
            "get_up_time": "06:10:00",
            "get_up_log": ""
        },
        "äºº*****": {
            "nick": "äºº*****",
            "get_up_time": "06:18:00",
            "get_up_log": "-6:40ååœ¨åºŠä¸Šæ¸…é†’ï¼Œæœ€è¿‘æ€»æ˜¯ç¡å¾—æ™šï¼Œèµ·ä¸æ¥äº†\n-7:20å¬ä¹¦ï¼Œé˜…è¯»\n-7:50æ—©é¥­ æ´—æ¼±å‡ºé—¨"
        },
        "æ›¾**": {
            "nick": "æ›¾**",
            "get_up_time": "06:25:00",
            "get_up_log": "-7:05 æ—©é¤å‡ºé—¨\n-7:25 é‡åˆ°è€åŒäº‹èŠå¤©\n-7:50 å›½åº†å¤‡è€ƒå¤ä¹ è®¡åˆ’\n-8:20 å­¦ä¹ å¾—åˆ°è¯¾ç¨‹"
        },
        "ğŸ‘*****": {
            "nick": "ğŸ‘*****",
            "get_up_time": "06:28:00",
            "get_up_log": "-7:10è¿åŠ¨\n-7:30æ´—å¤´æ´—æ¾¡\n-7:50åƒæ—©é¥­\n-8:20æ”¶æ‹¾ï¼Œæ´—æ¼±å‡ºé—¨"
        },
        "ç´******": {
            "nick": "ç´******",
            "get_up_time": "06:30:00",
            "get_up_log": ""
        },
        "å°*******": {
            "nick": "å°*******",
            "get_up_time": "06:36:00",
            "get_up_log": ""
        },
        "å¤§******": {
            "nick": "å¤§******",
            "get_up_time": "07:00:00",
            "get_up_log": ""
        },
        "FOUND40*****": {
            "nick": "FOUND40*****",
            "get_up_time": "07:04:00",
            "get_up_log": ""
        },
        "e****": {
            "nick": "e****",
            "get_up_time": "07:04:00",
            "get_up_log": ""
        },
        "çŒ«**": {
            "nick": "çŒ«**",
            "get_up_time": "07:20:00",
            "get_up_log": "7.30 æ´—æ¼±\n8.00 æ‰“çƒ\n9.00 ç®—æ³•è®­ç»ƒ\n9.30 å­¦ä¹ æ˜é‡‘å°å†Œ"
        },
        "æ±¤***": {
            "nick": "æ±¤***",
            "get_up_time": "07:26:00",
            "get_up_log": ""
        },
        "ä¸****": {
            "nick": "ä¸****",
            "get_up_time": "07:30:00",
            "get_up_log": "-8.00 å†¥æƒ³\n-8.20æ´—æ¼±\n-9.00 ã€Šå†…è¯****ã€‹"
        },
        "é’±******": {
            "nick": "é’±******",
            "get_up_time": "07:30:00",
            "get_up_log": ""
        },
        "å½±**": {
            "nick": "å½±**",
            "get_up_time": "07:50:00",
            "get_up_log": ""
        },
        "å°**": {
            "nick": "å°**",
            "get_up_time": "07:50:00",
            "get_up_log": ""
        }
    }
    '''
